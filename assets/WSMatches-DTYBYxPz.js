import{a as z,s as G}from"./sec2str-C7PZcunT.js";import{d as S,aO as W,aP as B,a as E,o as r,b as u,f as e,F as V,D as M,C as j,t as _,_ as b,i as $,r as D,w as P,O as x,aQ as T,Q as H,aI as J,N as O,e as k,h as Y,aD as K,s as q,v as Q,B as A,A as X,u as C,P as L}from"./index-apcgZ0Wz.js";const Z={class:"pagination"},ee=["onClick"],U=2,se=S({__name:"Pagination",props:W({maxPage:{}},{modelValue:{default:1,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const c=d,o=B(d,"modelValue",{set(s){return s<1&&(s=1),s>c.maxPage&&(s=c.maxPage),s}}),p=E(()=>{let s=Math.max(o.value-U,1),a=Math.min(o.value+U,c.maxPage);return a-s+1<5&&(s===1?a=Math.min(c.maxPage,s+4):a===c.maxPage&&(s=Math.max(1,a-4))),Array.from({length:a-s+1},(v,m)=>s+m)});return(s,a)=>(r(),u("ul",Z,[e("li",{class:"arrow prev",onClick:a[0]||(a[0]=v=>o.value=o.value-1)}),(r(!0),u(V,null,M(p.value,v=>(r(),u("li",{key:v,class:j({selected:v===s.$props.modelValue}),onClick:m=>o.value=v},_(v),11,ee))),128)),e("li",{class:"arrow next",onClick:a[1]||(a[1]=v=>o.value=o.value+1)})]))}}),R=b(se,[["__scopeId","data-v-2bf6673e"]]),te=d=>(q("data-v-a8cdb687"),d=d(),Q(),d),ae={class:"label"},le={key:0},oe={key:1},ne=te(()=>e("div",{class:"arrow"},null,-1)),ie={key:0,class:"multiselect_list"},re=["onClick"],ue=["checked"],de={class:"label"},ce=S({__name:"MultiSelect",props:W({options:{},displayField:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const c=d,o=B(d,"modelValue"),p=$(!1),s=$(),a=$(),v=E(()=>c.options.filter(n=>{var t,i;return(i=n[c.displayField])==null?void 0:i.toLowerCase().includes((t=a.value)==null?void 0:t.toLowerCase())}));function m(){var n;p.value=!p.value,p.value&&(a.value="",(n=s.value)==null||n.focus())}function h(n){o.value.includes(n)?o.value.splice(o.value.indexOf(n),1):o.value.push(n)}function I(){o.value=[]}return(n,t)=>{const i=D("t"),g=D("click-outside");return P((r(),u("div",{class:j(["multiselect",{__active:p.value}])},[x(n.$slots,"default",{selected:o.value,toggleDropdown:m},()=>[e("button",{class:"multiselect_btn",onClick:m},[P(e("input",{ref_key:"filterInput",ref:s,"onUpdate:modelValue":t[0]||(t[0]=f=>a.value=f),type:"text",onClick:t[1]||(t[1]=T(()=>{},["stop"]))},null,512),[[H,a.value]]),P(e("div",ae,[x(n.$slots,"label",{},()=>[o.value.length?(r(),u("p",le,_(n.$t("SELECTED",[o.value.length])),1)):P((r(),u("p",oe,null,512)),[[i,"SELECT"]])],!0)],512),[[J,!p.value]]),p.value?O("",!0):(r(),u("div",{key:0,class:"clear",onClick:T(I,["stop"])})),ne])],!0),k(K,{name:"list"},{default:Y(()=>[p.value?(r(),u("ul",ie,[(r(!0),u(V,null,M(v.value,(f,w)=>(r(),u("li",{key:w,onClick:l=>h(f)},[e("input",{type:"checkbox",checked:n.$props.modelValue.includes(f)},null,8,ue),e("span",de,_(f[n.$props.displayField]),1)],8,re))),128))])):O("",!0)]),_:1})],2)),[[g,()=>p.value=!1]])}}}),pe=b(ce,[["__scopeId","data-v-a8cdb687"]]),N=d=>(q("data-v-6335f7b1"),d=d(),Q(),d),me={class:"filters"},_e={class:"label"},ve={class:"list"},fe={class:"corp-names"},he=N(()=>e("span",{class:"vs-icon"},null,-1)),ge={class:"score"},$e={class:"corp-info"},we=N(()=>e("span",null," - ",-1)),Ce={class:"corp-info"},Pe={key:0},Ie={key:1},ke=N(()=>e("div",{class:"footer"},[e("div",{class:"content"},[e("p",null,[L("Powered by "),e("a",{href:"https://ws.mentalisit.myds.me",target:"_blank"},"ws.mentalisit.myds.me"),L(" API ")])])],-1)),F="https://ws.mentalisit.myds.me/",ye=S({__name:"WSMatches",setup(d){const c=new URL("matches",F),o=new URL("corps",F),p=new Date,s=$(),a=$([]),v=E(()=>{var t;return(((t=s.value)==null?void 0:t.matches)||[]).map(i=>({...i,DateEnded:new Date(i.DateEnded)}))}),m=$(1),h=$([]);c.searchParams.set("limit","50"),A(m,()=>{window.scrollTo({top:0,behavior:"smooth"}),c.searchParams.set("page",m.value.toString()),I()},{immediate:!0}),A(h,()=>{h.value.length==0?c.searchParams.delete("filter"):c.searchParams.set("filter",JSON.stringify({corp:h.value})),m.value=1,I()},{deep:!0}),X(async()=>{a.value=await fetch(o).then(t=>t.json()).then(t=>t.matches)});async function I(){s.value=await fetch(c).then(t=>t.json())}function n(t){const i=a.value.find(g=>g.Id==t);if(i){const[g,f,w,l]=Object.entries(i).filter(([y])=>!["Name","Id"].includes(y)).map(([,y])=>y);return`[W:${g}/L:${f}/D:${w}/E:${l}]`}}return(t,i)=>{var f,w;const g=D("t");return r(),u("div",null,[e("div",me,[e("div",null,[P(e("p",_e,null,512),[[g,"TID_OTHER_PLAYER_INFO_PAGE_CORP_SECTION"]]),k(pe,{modelValue:h.value,"onUpdate:modelValue":i[0]||(i[0]=l=>h.value=l),options:a.value,"display-field":"Name"},null,8,["modelValue","options"])])]),k(R,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=l=>m.value=l),"max-page":((f=s.value)==null?void 0:f.MaxPage)||1},null,8,["modelValue","max-page"]),e("ul",ve,[(r(!0),u(V,null,M(v.value,l=>(r(),u("li",{key:l.MatchId},[e("div",null,[e("p",fe,[e("span",null,_(l.Corporation1Name),1),he,e("span",null,_(l.Corporation2Name),1)]),e("p",ge,[e("span",$e,_(n(l.Corporation1Id)),1),e("span",null,_(l.Corporation1Score),1),we,e("span",null,_(l.Corporation2Score),1),e("span",Ce,_(n(l.Corporation2Id)),1)]),l.DateEnded-C(p)>0?(r(),u("p",Pe,[e("span",null,_(t.$t("TID_WS_PREPARATION_ENDS_IN",[C(z)((l.DateEnded-C(p))/1e3)])),1)])):(r(),u("p",Ie,[e("span",null,_(t.$t("TID_WS_ENDED"))+" "+_(`(${t.$t("TID_SOCIAL_TIMESTAMP",[C(G)((C(p)-l.DateEnded)/1e3)])})`),1)]))])]))),128))]),k(R,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=l=>m.value=l),"max-page":((w=s.value)==null?void 0:w.MaxPage)||1},null,8,["modelValue","max-page"]),ke])}}}),Ee=b(ye,[["__scopeId","data-v-6335f7b1"]]);export{Ee as default};
